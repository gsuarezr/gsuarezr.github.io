---
import Layout from './Layout.astro';
import { format } from 'date-fns';

const { frontmatter } = Astro.props;
---

<Layout title={frontmatter.title}>
  <article class="prose lg:prose-xl dark:prose-invert mx-auto">
    <header class="mb-8">
      <h1 class="mb-2">{frontmatter.title}</h1>
      <div class="text-gray-600 dark:text-gray-400">
        {format(new Date(frontmatter.date), 'MMMM d, yyyy')}
      </div>
      {frontmatter.description && (
        <p class="text-gray-600 dark:text-gray-400 mt-2">{frontmatter.description}</p>
      )}
      {frontmatter.tags && frontmatter.tags.length > 0 && (
        <div class="flex gap-2 mt-4">
          {frontmatter.tags.map((tag: string) => (
            <span class="px-2 py-1 text-sm bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-full">
              {tag}
            </span>
          ))}
        </div>
      )}
    </header>
    
    <div class="katex-rendered">
      <slot />
    </div>
  </article>
</Layout>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" />

<style>
  .katex-rendered {
    counter-reset: equation;
  }
  
  .math.math-display {
    position: relative;
    padding-right: 3em;
  }
  
  .math.math-display::after {
    counter-increment: equation;
    content: "(" counter(equation) ")";
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.9em;
    color: var(--tw-prose-body);
  }
</style>